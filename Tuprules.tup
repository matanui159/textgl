include config.tup

WIN32 = n
ifeq (@(TUP_PLATFORM),win32)
	WIN32 = y
endif

BIN_EXT =
LIB_EXT = .so
ifeq ($(WIN32),y)
	BIN_EXT = .exe
	LIB_EXT = .dll
endif

ifneq ($(CONFIG),none)
	CC_FLAGS += -std=c99
	CC_FLAGS += -Werror -Wall -Wextra -Wpedantic
	ifeq ($(CONFIG),debug)
		CC_FLAGS += -g
	else
		CC_FLAGS += -flto -O3
		LD_FLAGS += -flto -O3 -s
	endif
endif

!CC = |> ^ CC %f^ gcc -c %f -o %o $(CC_FLAGS) |>
!LD = |> ^ LD %o^ gcc %f -o %o $(LD_FLAGS) |>